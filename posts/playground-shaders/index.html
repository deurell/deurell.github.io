<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Metal shader development on an iPad | Deurell Labs</title>
<meta name="keywords" content="Playgrounds, SceneKit, Shaders">
<meta name="description" content="The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.
It was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:
But you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?">
<meta name="author" content="">
<link rel="canonical" href="https://deurell.github.io/posts/playground-shaders/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://deurell.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://deurell.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://deurell.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://deurell.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://deurell.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Metal shader development on an iPad" />
<meta property="og:description" content="The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.
It was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:
But you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://deurell.github.io/posts/playground-shaders/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-23T18:53:16+02:00" />
<meta property="article:modified_time" content="2019-04-23T18:53:16+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Metal shader development on an iPad"/>
<meta name="twitter:description" content="The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.
It was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:
But you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://deurell.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Metal shader development on an iPad",
      "item": "https://deurell.github.io/posts/playground-shaders/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Metal shader development on an iPad",
  "name": "Metal shader development on an iPad",
  "description": "The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.\nIt was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:\nBut you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?",
  "keywords": [
    "Playgrounds", "SceneKit", "Shaders"
  ],
  "articleBody": "The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.\nIt was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:\nBut you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?\nEnter iOS playgrounds Playgrounds on the iPad supports SceneKit development and the shaders we wrote in the previous posts were all metal based shaders in SceneKit so we’re fine! The lazer cube shader is easy, the only thing I had to do was to old school include the fragment shader modifier in a Swift string, move to UIKit and add the scene to the Playgrounds live view. The full source looks like this:\nimport UIKit import SceneKit import PlaygroundSupport let frame = CGRect( x: 0, y: 0, width: 400, height: 200) let sceneView = SCNView(frame: frame) sceneView.backgroundColor = #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0) sceneView.showsStatistics = false sceneView.autoenablesDefaultLighting = false sceneView.allowsCameraControl = true sceneView.scene = SCNScene() let cameraNode = SCNNode() cameraNode.camera = SCNCamera() cameraNode.position = SCNVector3(x: 0, y: 0, z: 12) sceneView.scene!.rootNode.addChildNode(cameraNode) let geo = SCNBox( width: 4, height: 4, length: 4, chamferRadius: 0.5) let node = SCNNode(geometry: geo) node.transform = SCNMatrix4MakeRotation(Float.pi * 0.25,1,0,0) sceneView.scene!.rootNode.addChildNode(node) let material = geo.firstMaterial! let fragShader = \"\"\" #pragma transparent #pragma arguments float3 lazerCol; #pragma body float2 uv = _surface.diffuseTexcoord; float x = 1.0-sin(uv.x*M_PI_F); x = pow(x,4) - 0.05; float y = 1.0-sin(uv.y*M_PI_F); y = pow(y,4)-0.05; float mx = mix(x,y,0.5); float3 col = lazerCol * mx; col *= 4.; _output.color.rgb = col; \"\"\" material.shaderModifiers = [.fragment: fragShader] material.setValue(SCNVector3(0.5, 0.8, 0.5), forKey: \"lazerCol\") PlaygroundSupport.PlaygroundPage.current.liveView = sceneView After doing that we get the reward! Metal Shader development on the iPad:\nIt’s really nice to have documentation available in the source view and Playgrounds is also pretty good at visualizing things. Like this SCNMatrix4 rotation, rotated 45 degrees around the X-axis, inlined in the source. Fantastic for teaching!\nSo how do we handle resources? We really need a texture for the skull ‘LUT’ deformation frag shader modifier. For some reason you can’t add them from the iPad. You need to boot up XCode on the Mac and add the resource to the playground from there. After that you can move back to your iPad, sync, and do an ordinary trusted\ngeo.firstMaterial?.diffuse.contents = UIImage(named: \"skull.jpg\")\nBut hey, it’s pretty cool anyways. After you have the resource in place everything is back to normal.\nThat’s it. You can now fine tune your shaders on the commute to work. Or in the hammock in the deep woods of Sweden.\n\u003c3\n",
  "wordCount" : "470",
  "inLanguage": "en",
  "datePublished": "2019-04-23T18:53:16+02:00",
  "dateModified": "2019-04-23T18:53:16+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://deurell.github.io/posts/playground-shaders/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Deurell Labs",
    "logo": {
      "@type": "ImageObject",
      "url": "https://deurell.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://deurell.github.io" accesskey="h" title="Deurell Labs (Alt + H)">Deurell Labs</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Metal shader development on an iPad
    </h1>
    <div class="post-meta"><span title='2019-04-23 18:53:16 +0200 CEST'>April 23, 2019</span>

</div>
  </header> 
  <div class="post-content"><p>The iPad is an amazing learning device. You can read shader books on it. Draw shader ideas on it. And ever since iOS playgrounds got a major boost you can even develop Metal shaders on it using Playgrounds.</p>
<p>It was the only device I had with me on my easter vacation in the woods. Most of the time was spent like this:</p>
<p><img loading="lazy" src="/woods.png" alt="woods"  />
</p>
<p>But you need to catch your breath every once in a while and what could possibly be better than coding shaders on the iPad, in the hammock?</p>
<h2 id="enter-ios-playgrounds">Enter iOS playgrounds<a hidden class="anchor" aria-hidden="true" href="#enter-ios-playgrounds">#</a></h2>
<p>Playgrounds on the iPad supports SceneKit development and the shaders we wrote in the previous posts were all metal based shaders in SceneKit so we&rsquo;re fine! The lazer cube shader is easy, the only thing I had to do was to old school include the fragment shader modifier in a Swift string, move to UIKit and add the scene to the Playgrounds live view. The full source looks like this:</p>
<pre tabindex="0"><code>import UIKit
import SceneKit
import PlaygroundSupport

let frame = CGRect(
    x: 0,
    y: 0,
    width: 400,
    height: 200)
let sceneView = SCNView(frame: frame)
sceneView.backgroundColor = #colorLiteral(red: 0.0, green: 0.0, blue: 0.0, alpha: 1.0)
sceneView.showsStatistics = false
sceneView.autoenablesDefaultLighting = false
sceneView.allowsCameraControl = true
sceneView.scene = SCNScene()

let cameraNode = SCNNode()
cameraNode.camera = SCNCamera()
cameraNode.position = SCNVector3(x: 0, y: 0, z: 12)
sceneView.scene!.rootNode.addChildNode(cameraNode)

let geo = SCNBox(
    width: 4,
    height: 4,
    length: 4,
    chamferRadius: 0.5)
let node = SCNNode(geometry: geo)
node.transform = SCNMatrix4MakeRotation(Float.pi * 0.25,1,0,0)
sceneView.scene!.rootNode.addChildNode(node)

let material = geo.firstMaterial!

let fragShader = &#34;&#34;&#34;
#pragma transparent
#pragma arguments
float3 lazerCol;
#pragma body
float2 uv = _surface.diffuseTexcoord;
float x = 1.0-sin(uv.x*M_PI_F);
x = pow(x,4) - 0.05;
float y = 1.0-sin(uv.y*M_PI_F);
y = pow(y,4)-0.05;

float mx = mix(x,y,0.5);
float3 col = lazerCol * mx;
col *= 4.;
_output.color.rgb = col;
&#34;&#34;&#34;

material.shaderModifiers = [.fragment: fragShader]

material.setValue(SCNVector3(0.5, 0.8, 0.5), forKey: &#34;lazerCol&#34;)
PlaygroundSupport.PlaygroundPage.current.liveView = sceneView
</code></pre><p>After doing that we get the reward! Metal Shader development on the iPad:</p>
<p><img loading="lazy" src="/laz.jpeg" alt="lazer"  />
</p>
<p>It&rsquo;s really nice to have documentation available in the source view and Playgrounds is also pretty good at visualizing things. Like this <code>SCNMatrix4</code> rotation, rotated 45 degrees around the X-axis, inlined in the source. Fantastic for teaching!</p>
<p><img loading="lazy" src="/laz_vi.jpeg" alt="lazer"  />
</p>
<h2 id="so-how-do-we-handle-resources">So how do we handle resources?<a hidden class="anchor" aria-hidden="true" href="#so-how-do-we-handle-resources">#</a></h2>
<p>We really need a texture for the skull &lsquo;LUT&rsquo; deformation frag shader modifier. For some reason you can&rsquo;t add them from the iPad. You need to boot up XCode on the Mac and add the resource to the playground from there. After that you can move back to your iPad, sync, and do an ordinary trusted</p>
<p><code>geo.firstMaterial?.diffuse.contents = UIImage(named: &quot;skull.jpg&quot;)</code></p>
<p>But hey, it&rsquo;s pretty cool anyways. After you have the resource in place everything is back to normal.</p>
<p><img loading="lazy" src="/sku.jpeg" alt="lazer"  />
</p>
<p>That&rsquo;s it. You can now fine tune your shaders on the commute to work. Or in the hammock in the deep woods of Sweden.</p>
<p>&lt;3</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://deurell.github.io/tags/playgrounds/">Playgrounds</a></li>
      <li><a href="https://deurell.github.io/tags/scenekit/">SceneKit</a></li>
      <li><a href="https://deurell.github.io/tags/shaders/">Shaders</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://deurell.github.io">Deurell Labs</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
